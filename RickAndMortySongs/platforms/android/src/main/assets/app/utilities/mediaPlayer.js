var app = require('application');
var fs = require('file-system');
var MediaPlayer = (function () {
    function MediaPlayer() {
        this.playlist = [];
        this.currentIndex = 0;
    }
    MediaPlayer.prototype.loadMp3 = function (index) {
        var files = fs.knownFolders.currentApp();
        if (index >= this.playlist.length)
            index = 0;
        var mp3 = files.getFile(this.playlist[index].path);
        this.currentIndex = index;
        this.mediaPlayer = android.media.MediaPlayer.create(app.android.context, android.net.Uri.parse(mp3.path));
    };
    MediaPlayer.prototype.play = function () {
        if (this.mediaPlayer == null)
            this.loadMp3(0);
        this.mediaPlayer.start();
    };
    MediaPlayer.prototype.addToPlaylist = function (mp3) {
        this.playlist.push(mp3);
    };
    MediaPlayer.prototype.getDuration = function () {
        return this.mediaPlayer.getDuration();
    };
    MediaPlayer.prototype.getCurrentMp3 = function () {
        return this.playlist[this.currentIndex];
    };
    MediaPlayer.prototype.getCurrentDuration = function () {
        return this.mediaPlayer.getCurrentDuration();
    };
    MediaPlayer.prototype.isPlaying = function () {
        return this.mediaPlayer.isPlaying();
    };
    MediaPlayer.prototype.reset = function () {
        this.mediaPlayer.reset();
    };
    MediaPlayer.prototype.pause = function () {
        this.mediaPlayer.pause();
    };
    return MediaPlayer;
})();
exports.MediaPlayer = MediaPlayer;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVkaWFQbGF5ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtZWRpYVBsYXllci50cyJdLCJuYW1lcyI6WyJNZWRpYVBsYXllciIsIk1lZGlhUGxheWVyLmNvbnN0cnVjdG9yIiwiTWVkaWFQbGF5ZXIubG9hZE1wMyIsIk1lZGlhUGxheWVyLnBsYXkiLCJNZWRpYVBsYXllci5hZGRUb1BsYXlsaXN0IiwiTWVkaWFQbGF5ZXIuZ2V0RHVyYXRpb24iLCJNZWRpYVBsYXllci5nZXRDdXJyZW50TXAzIiwiTWVkaWFQbGF5ZXIuZ2V0Q3VycmVudER1cmF0aW9uIiwiTWVkaWFQbGF5ZXIuaXNQbGF5aW5nIiwiTWVkaWFQbGF5ZXIucmVzZXQiLCJNZWRpYVBsYXllci5wYXVzZSJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBWSxHQUFHLFdBQU0sYUFBYSxDQUFDLENBQUE7QUFDbkMsSUFBWSxFQUFFLFdBQU0sYUFBYSxDQUFDLENBQUE7QUFPbEM7SUFLQ0E7UUFDQ0MsSUFBSUEsQ0FBQ0EsUUFBUUEsR0FBR0EsRUFBRUEsQ0FBQ0E7UUFDbkJBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLENBQUNBLENBQUNBO0lBQ3ZCQSxDQUFDQTtJQUVERCw2QkFBT0EsR0FBUEEsVUFBUUEsS0FBYUE7UUFDcEJFLElBQUlBLEtBQUtBLEdBQUdBLEVBQUVBLENBQUNBLFlBQVlBLENBQUNBLFVBQVVBLEVBQUVBLENBQUNBO1FBQ3pDQSxFQUFFQSxDQUFDQSxDQUFDQSxLQUFLQSxJQUFJQSxJQUFJQSxDQUFDQSxRQUFRQSxDQUFDQSxNQUFNQSxDQUFDQTtZQUNqQ0EsS0FBS0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7UUFDWEEsSUFBSUEsR0FBR0EsR0FBR0EsS0FBS0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7UUFDbkRBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLEtBQUtBLENBQUNBO1FBQzFCQSxJQUFJQSxDQUFDQSxXQUFXQSxHQUFHQSxPQUFPQSxDQUFDQSxLQUFLQSxDQUFDQSxXQUFXQSxDQUFDQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQSxPQUFPQSxDQUFDQSxPQUFPQSxFQUFFQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFHQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUMzR0EsQ0FBQ0E7SUFFREYsMEJBQUlBLEdBQUpBO1FBQ0NHLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFdBQVdBLElBQUlBLElBQUlBLENBQUNBO1lBQzVCQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUVqQkEsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsS0FBS0EsRUFBRUEsQ0FBQ0E7SUFDMUJBLENBQUNBO0lBRURILG1DQUFhQSxHQUFiQSxVQUFjQSxHQUFTQTtRQUN0QkksSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFDekJBLENBQUNBO0lBRURKLGlDQUFXQSxHQUFYQTtRQUNDSyxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxXQUFXQSxFQUFFQSxDQUFDQTtJQUN2Q0EsQ0FBQ0E7SUFDREwsbUNBQWFBLEdBQWJBO1FBQ0NNLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLENBQUNBO0lBQ3pDQSxDQUFDQTtJQUNETix3Q0FBa0JBLEdBQWxCQTtRQUNDTyxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxrQkFBa0JBLEVBQUVBLENBQUNBO0lBQzlDQSxDQUFDQTtJQUVEUCwrQkFBU0EsR0FBVEE7UUFDQ1EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsU0FBU0EsRUFBRUEsQ0FBQ0E7SUFDckNBLENBQUNBO0lBRURSLDJCQUFLQSxHQUFMQTtRQUNDUyxJQUFJQSxDQUFDQSxXQUFXQSxDQUFDQSxLQUFLQSxFQUFFQSxDQUFDQTtJQUMxQkEsQ0FBQ0E7SUFFRFQsMkJBQUtBLEdBQUxBO1FBQ0NVLElBQUlBLENBQUNBLFdBQVdBLENBQUNBLEtBQUtBLEVBQUVBLENBQUNBO0lBQzFCQSxDQUFDQTtJQUNGVixrQkFBQ0E7QUFBREEsQ0FBQ0EsQUFuREQsSUFtREM7QUFuRFksbUJBQVcsY0FtRHZCLENBQUEifQ==